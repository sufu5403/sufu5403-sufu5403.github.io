<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‰å³°åœ‹ä¸­å“¥å¸ƒæ—ç‹åœ‹</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, addDoc, collection, query, orderBy, onSnapshot, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Global Firebase variables
        window.fb = {};
        window.fb.appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');

        if (Object.keys(firebaseConfig).length > 0) {
            window.fb.app = initializeApp(firebaseConfig);
            window.fb.db = getFirestore(window.fb.app);
            window.fb.auth = getAuth(window.fb.app);

            // Sign in anonymously if no custom token, otherwise use custom token
            onAuthStateChanged(window.fb.auth, async (user) => {
                if (!user) {
                    if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                        try {
                            await signInWithCustomToken(window.fb.auth, __initial_auth_token);
                            console.log('Signed in with custom token');
                        } catch (error) {
                            console.error('Error signing in with custom token:', error);
                            await signInAnonymously(window.fb.auth);
                            console.log('Signed in anonymously as fallback');
                        }
                    } else {
                        await signInAnonymously(window.fb.auth);
                        console.log('Signed in anonymously');
                    }
                }
                window.fb.userId = window.fb.auth.currentUser?.uid || crypto.randomUUID(); // Get user ID after auth state is ready
                document.dispatchEvent(new CustomEvent('firebaseAuthReady')); // Notify when auth is ready
            });
        } else {
            console.error("Firebase config is empty or not provided.");
        }
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f9fafb; /* è¨­ç½®ä¸€å€‹åŸºç¤èƒŒæ™¯è‰² */
        }
        /* å®¢æœèŠå¤©è¦–çª—çš„å›ºå®šå®šä½å’ŒåŸºæœ¬æ¨£å¼ */
        .chat-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px; /* èŠå¤©è¦–çª—å¯¬åº¦ */
            height: 450px; /* èŠå¤©è¦–çª—é«˜åº¦ */
            background-color: #fff;
            border-radius: 1rem; /* åœ“è§’ */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2); /* é™°å½± */
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: all 0.3s ease-in-out; /* å¹³æ»‘éæ¸¡æ•ˆæœ */
            z-index: 1000; /* ç¢ºä¿åœ¨æœ€ä¸Šå±¤ */
        }

        /* æœ€å°åŒ–ç‹€æ…‹ */
        .chat-container.minimized {
            width: 60px;
            height: 60px;
            bottom: 20px;
            right: 20px;
            border-radius: 50%; /* è®Šæˆåœ“å½¢ */
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            cursor: pointer;
        }

        /* èŠå¤©è¨Šæ¯å€å¡Šæ¨£å¼ */
        .chat-messages {
            flex-grow: 1;
            overflow-y: auto;
            padding: 1rem;
            background-color: #f9fafb; /* æ·ºç°è‰²èƒŒæ™¯ */
            border-top-left-radius: 0.5rem;
            border-top-right-radius: 0.5rem;
        }

        /* èŠå¤©è¨Šæ¯æ³¡æ³¡æ¨£å¼ */
        .message-bubble {
            max-width: 80%;
            padding: 0.6rem 1rem;
            border-radius: 1rem;
            margin-bottom: 0.75rem;
            word-wrap: break-word;
        }

        .message-bubble.user {
            background-color: #3B82F6; /* è—è‰² */
            color: white;
            margin-left: auto; /* é å³å°é½Š */
            border-bottom-right-radius: 0.2rem;
        }

        .message-bubble.ai {
            background-color: #E5E7EB; /* æ·ºç° */
            color: #1F2937;
            margin-right: auto; /* é å·¦å°é½Š */
            border-bottom-left-radius: 0.2rem;
        }

        /* éš±è—èŠå¤©è¦–çª—å…§å®¹ï¼ˆæœ€å°åŒ–æ™‚ï¼‰ */
        .chat-container.minimized .chat-header,
        .chat-container.minimized .chat-messages,
        .chat-container.minimized .chat-input-area {
            display: none;
        }

        /* æœ€å°åŒ–æŒ‰éˆ•çš„åœ–ç¤º */
        .chat-container.minimized .chat-toggle-button {
            display: block; /* æœ€å°åŒ–æ™‚é¡¯ç¤ºæŒ‰éˆ• */
            font-size: 2rem;
            color: #4B5563;
        }

        /* æµ®å‹•æŒ‰éˆ•çš„æ¨£å¼ */
        .floating-chat-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background-color: #10B981; /* ç¶ è‰² */
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease-in-out;
            z-index: 1001; /* ç¢ºä¿åœ¨æœ€ä¸Šå±¤ */
        }

        .floating-chat-button:hover {
            transform: scale(1.1);
            background-color: #059669;
        }

        .log-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px dashed rgba(255, 255, 255, 0.2);
        }
        .log-item:last-child {
            border-bottom: none;
        }
        .log-item span {
            color: #ccc;
        }
        .log-item .log-ip {
            color: #81C784; /* Light green for IP */
            font-weight: bold;
        }
        .log-item .log-time {
            color: #FFD54F; /* Amber for time */
            font-style: italic;
        }
        .log-item .log-user {
            color: #90CAF9; /* Light blue for user ID */
            font-size: 0.8em;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-green-400 to-blue-500">
    <!-- ä¸»è¦å…§å®¹å€å¡Š -->
    <div id="mainContent" class="flex items-center justify-center min-h-screen p-4">
        <div class="bg-white p-8 rounded-xl shadow-2xl max-w-4xl w-full text-center transform transition-all duration-300 hover:scale-105">
            <h1 class="text-5xl font-extrabold text-gray-900 mb-6 leading-tight">
                å‰å³°åœ‹ä¸­å“¥å¸ƒæ—ç‹åœ‹
            </h1>

            <p class="text-xl text-gray-700 mb-8">
                å“¥å¸ƒæ—ç‹åœ‹,æˆç«‹æ–¼2025å¹´3æœˆ11æ—¥,æ˜¯ä¸€å€‹ç”±åœ‹ä¸­å–®èº«ç”·å¥³çµ„æˆçš„èŠå¤©èšè½ã€‚
                æˆ‘å€‘è‡ªç¨±ã€Œå“¥å¸ƒæ—ã€,ä¸ç‚ºåˆ¥çš„,åªå› å–®èº«ä½†ä¸å­¤å–®,æç¬‘åˆçœŸèª ,å˜´ç ²ä¸­å¸¶é»æº«æŸ”,æ—¥å¸¸ä¸­å……æ»¿ç«èŠ±ã€‚
                é€™è£¡æ²’æœ‰ç‹å­å…¬ä¸»,åªæœ‰ä¸€ç¾¤åœ¨è¨Šæ¯è£¡äº’ç›¸é¬§äº’ç›¸æŒºçš„å“¥å¸ƒæ—å¤¥ä¼´ã€‚
            </p>

            <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 p-6 rounded-lg mb-8 shadow-md">
                <h2 class="text-2xl font-bold mb-3 flex items-center justify-center">
                    <svg class="w-7 h-7 mr-3 text-yellow-600" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.542 2.705-1.542 3.47 0l5.58 11.23c.75 1.51.148 3.3-1.565 3.3H4.242c-1.713 0-2.315-1.79-.164-3.3l5.58-11.23zM11 15a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V7a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>
                    è²æ˜ï¼
                </h2>
                <p class="text-lg">
                    è¿½è¹¤æˆ‘å€‘çš„å¸³è™Ÿï¼Œå°‡æœƒç„¡æ¢ä»¶æ‹‰æ‚¨é€²å…¥æˆ‘å€‘çš„å°ˆå±¬ç¤¾ç¾¤ç¾¤çµ„ï¼
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                <div class="bg-blue-50 p-6 rounded-lg shadow-md border border-blue-200 flex flex-col items-center">
                    <h3 class="text-xl font-semibold text-blue-800 mb-2">ç¸½çµ±</h3>
                    <a href="https://www.instagram.com/qwer789456321/" target="_blank" rel="noopener noreferrer" class="text-gray-700 text-lg flex items-center hover:text-blue-600 transition-colors duration-200">
                        @qwer789456321
                        <svg class="w-5 h-5 ml-2 text-pink-600" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.217 2.428.465.66.254 1.216.598 1.772 1.154.556.556.909 1.112 1.154 1.772.248.637.416 1.364.465 2.428.047 1.024.06 1.379.06 3.808v.63a4.5 4.5 0 01-.07 1.006c-.035.52-.103 1.06-.271 1.59-.147.45-.33.86-.53 1.22-.205.36-.461.66-.776.975-.315.315-.615.571-.975.776-.36.2-.77.383-1.22.53-.53.168-1.07.236-1.59.271a4.5 4.5 0 01-1.006.07h-.63c-2.43 0-2.784-.013-3.808-.06-1.064-.049-1.791-.217-2.428-.465-.66-.254-1.216-.598-1.772-1.154-.556-.556-.909-1.112-1.154-1.772-.248-.637-.416-1.364-.465-2.428C2.013 14.784 2 14.43 2 12v-.63c0-2.43.013-2.784.06-3.808.049-1.064.217-1.791.465-2.428.254-.66.598-1.216 1.154-1.772.556-.556 1.112-.909 1.772-1.154.637-.248 1.364-.416 2.428-.465C9.216 2.013 9.57 2 12 2zm0 2.16a7.84 7.84 0 100 15.68 7.84 7.84 0 000-15.68zm0 3.87a5.81 5.81 0 110 11.62 5.81 5.81 0 010-11.62zm0 2.16a3.65 3.65 0 100 7.3 3.65 3.65 0 000-7.3zM16.5 7.17a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clip-rule="evenodd" />
                        </svg>
                    </a>
                </div>
                <div class="bg-blue-50 p-6 rounded-lg shadow-md border border-blue-200 flex flex-col items-center">
                    <h3 class="text-xl font-semibold text-blue-800 mb-2">å‰¯ç¸½çµ±</h3>
                    <a href="https://www.instagram.com/e1310510/" target="_blank" rel="noopener noreferrer" class="text-gray-700 text-lg flex items-center hover:text-blue-600 transition-colors duration-200">
                        @e1310510
                        <svg class="w-5 h-5 ml-2 text-pink-600" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.217 2.428.465.66.254 1.216.598 1.772 1.154.556.556.909 1.112 1.154 1.772.248.637.416 1.364.465 2.428.047 1.024.06 1.379.06 3.808v.63a4.5 4.5 0 01-.07 1.006c-.035.52-.103 1.06-.271 1.59-.147.45-.33.86-.53 1.22-.205.36-.461.66-.776.975-.315.315-.615.571-.975.776-.36.2-.77.383-1.22.53-.53.168-1.07.236-1.59.271a4.5 4.5 0 01-1.006.07h-.63c-2.43 0-2.784-.013-3.808-.06-1.064-.049-1.791-.217-2.428-.465-.66-.254-1.216-.598-1.772-1.154-.556-.556-.909-1.112-1.154-1.772-.248-.637-.416-1.364-.465-2.428C2.013 14.784 2 14.43 2 12v-.63c0-2.43.013-2.784.06-3.808.049-1.064.217-1.791.465-2.428.254-.66.598-1.216 1.154-1.772.556-.556 1.112-.909 1.772-1.154.637-.248 1.364-.416 2.428-.465C9.216 2.013 9.57 2 12 2zm0 2.16a7.84 7.84 0 100 15.68 7.84 7.84 0 000-15.68zm0 3.87a5.81 5.81 0 110 11.62 5.81 5.81 0 010-11.62zm0 2.16a3.65 3.65 0 100 7.3 3.65 3.65 0 000-7.3zM16.5 7.17a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clip-rule="evenodd" />
                        </svg>
                    </a>
                </div>
                <div class="bg-blue-50 p-6 rounded-lg shadow-md border border-blue-200 flex flex-col items-center">
                    <h3 class="text-xl font-semibold text-blue-800 mb-2">ç¸½éƒ¨ç¸½è£</h3>
                    <a href="https://www.instagram.com/kerry_magic666/" target="_blank" rel="noopener noreferrer" class="text-gray-700 text-lg flex items-center hover:text-blue-600 transition-colors duration-200">
                        @kerry_magic666
                        <svg class="w-5 h-5 ml-2 text-pink-600" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.217 2.428.465.66.254 1.216.598 1.772 1.154.556.556.909 1.112 1.154 1.772.248.637.416 1.364.465 2.428.047 1.024.06 1.379.06 3.808v.63a4.5 4.5 0 01-.07 1.006c-.035.52-.103 1.06-.271 1.59-.147.45-.33.86-.53 1.22-.205.36-.461.66-.776.975-.315.315-.615.571-.975.776-.36.2-.77.383-1.22.53-.53.168-1.07.236-1.59.271a4.5 4.5 0 01-1.006.07h-.63c-2.43 0-2.784-.013-3.808-.06-1.064-.049-1.791-.217-2.428-.465-.66-.254-1.216-.598-1.772-1.154-.556-.556-.909-1.112-1.154-1.772-.248-.637-.416-1.364-.465-2.428C2.013 14.784 2 14.43 2 12v-.63c0-2.43.013-2.784.06-3.808.049-1.064.217-1.791.465-2.428.254-.66.598-1.216 1.154-1.772.556-.556 1.112-.909 1.772-1.154.637-.248 1.364-.416 2.428-.465C9.216 2.013 9.57 2 12 2zm0 2.16a7.84 7.84 0 100 15.68 7.84 7.84 0 000-15.68zm0 3.87a5.81 5.81 0 110 11.62 5.81 5.81 0 010-11.62zm0 2.16a3.65 3.65 0 100 7.3 3.65 3.65 0 000-7.3zM16.5 7.17a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clip-rule="evenodd" />
                        </svg>
                    </a>
                </div>
                <div class="bg-blue-50 p-6 rounded-lg shadow-md border border-blue-200 flex flex-col items-center">
                    <h3 class="text-xl font-semibold text-blue-800 mb-2">å°æ··æ··</h3>
                    <a href="https://www.instagram.com/89._.dry/" target="_blank" rel="noopener noreferrer" class="text-gray-700 text-lg flex items-center hover:text-blue-600 transition-colors duration-200">
                        @89._.dry
                        <svg class="w-5 h-5 ml-2 text-pink-600" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.217 2.428.465.66.254 1.216.598 1.772 1.154.556.556.909 1.112 1.154 1.772.248.637.416 1.364.465 2.428.047 1.024.06 1.379.06 3.808v.63a4.5 4.5 0 01-.07 1.006c-.035.52-.103 1.06-.271 1.59-.147.45-.33.86-.53 1.22-.205.36-.461.66-.776.975-.315.315-.615.571-.975.776-.36.2-.77.383-1.22.53-.53.168-1.07.236-1.59.271a4.5 4.5 0 01-1.006.07h-.63c-2.43 0-2.784-.013-3.808-.06-1.064-.049-1.791-.217-2.428-.465-.66-.254-1.216-.598-1.772-1.154-.556-.556-.909-1.112-1.154-1.772-.248-.637-.416-1.364-.465-2.428C2.013 14.784 2 14.43 2 12v-.63c0-2.43.013-2.784.06-3.808.049-1.064.217-1.791.465-2.428.254-.66.598-1.216 1.154-1.772.556-.556 1.112-.909 1.772-1.154.637-.248 1.364-.416 2.428-.465C9.216 2.013 9.57 2 12 2zm0 2.16a7.84 7.84 0 100 15.68 7.84 7.84 0 000-15.68zm0 3.87a5.81 5.81 0 110 11.62 5.81 5.81 0 010-11.62zm0 2.16a3.65 3.65 0 100 7.3 3.65 3.65 0 000-7.3zM16.5 7.17a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clip-rule="evenodd" />
                        </svg>
                    </a>
                </div>
                <div class="bg-blue-50 p-6 rounded-lg shadow-md border border-blue-200 flex flex-col items-center">
                    <h3 class="text-xl font-semibold text-blue-800 mb-2">å°ç·¨</h3>
                    <a href="https://www.instagram.com/kerry_magic666/" target="_blank" rel="noopener noreferrer" class="text-gray-700 text-lg flex items-center hover:text-blue-600 transition-colors duration-200">
                        @kerry_magic666
                        <svg class="w-5 h-5 ml-2 text-pink-600" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.217 2.428.465.66.254 1.216.598 1.772 1.154.556.556.909 1.112 1.154 1.772.248.637.416 1.364.465 2.428.047 1.024.06 1.379.06 3.808v.63a4.5 4.5 0 01-.07 1.006c-.035.52-.103 1.06-.271 1.59-.147.45-.33.86-.53 1.22-.205.36-.461.66-.776.975-.315.315-.615.571-.975.776-.36.2-.77.383-1.22.53-.53.168-1.07.236-1.59.271a4.5 4.5 0 01-1.006.07h-.63c-2.43 0-2.784-.013-3.808-.06-1.064-.049-1.791-.217-2.428-.465-.66-.254-1.216-.598-1.772-1.154-.556-.556-.909-1.112-1.154-1.772-.248-.637-.416-1.364-.465-2.428C2.013 14.784 2 14.43 2 12v-.63c0-2.43.013-2.784.06-3.808.049-1.064.217-1.791.465-2.428.254-.66.598-1.216 1.154-1.772.556-.556 1.112-.909 1.772-1.154.637-.248 1.364-.416 2.428-.465C9.216 2.013 9.57 2 12 2zm0 2.16a7.84 7.84 0 100 15.68 7.84 7.84 0 000-15.68zm0 3.87a5.81 5.81 0 110 11.62 5.81 5.81 0 010-11.62zm0 2.16a3.65 3.65 0 100 7.3 3.65 3.65 0 000-7.3zM16.5 7.17a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clip-rule="evenodd" />
                        </svg>
                    </a>
                </div>
                <div class="bg-blue-50 p-6 rounded-lg shadow-md border border-blue-200 flex flex-col items-center">
                    <h3 class="text-xl font-semibold text-blue-800 mb-2">ç¶²ç«™è¨­è¨ˆå¸«</h3>
                    <a href="https://www.instagram.com/sufu5403/" target="_blank" rel="noopener noreferrer" class="text-gray-700 text-lg flex items-center hover:text-blue-600 transition-colors duration-200">
                        @sufu5403
                        <svg class="w-5 h-5 ml-2 text-pink-600" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.217 2.428.465.66.254 1.216.598 1.772 1.154.556.556.909 1.112 1.154 1.772.248.637.416 1.364.465 2.428.047 1.024.06 1.379.06 3.808v.63a4.5 4.5 0 01-.07 1.006c-.035.52-.103 1.06-.271 1.59-.147.45-.33.86-.53 1.22-.205.36-.461.66-.776.975-.315.315-.615.571-.975.776-.36.2-.77.383-1.22.53-.53.168-1.07.236-1.59.271a4.5 4.5 0 01-1.006.07h-.63c-2.43 0-2.784-.013-3.808-.06-1.064-.049-1.791-.217-2.428-.465-.66-.254-1.216-.598-1.772-1.154-.556-.556-.909-1.112-1.154-1.772-.248-.637-.416-1.364-.465-2.428C2.013 14.784 2 14.43 2 12v-.63c0-2.43.013-2.784.06-3.808.049-1.064.217-1.791.465-2.428.254-.66.598-1.216 1.154-1.772.556-.556 1.112-.909 1.772-1.154.637-.248 1.364-.416 2.428-.465C9.216 2.013 9.57 2 12 2zm0 2.16a7.84 7.84 0 100 15.68 7.84 7.84 0 000-15.68zm0 3.87a5.81 5.81 0 110 11.62 5.81 5.81 0 010-11.62zm0 2.16a3.65 3.65 0 100 7.3 3.65 3.65 0 000-7.3zM16.5 7.17a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clip-rule="evenodd" />
                        </svg>
                    </a>
                </div>
            </div>

            <p class="text-gray-500 text-sm mt-8">
                Â© 2025 å‰å³°åœ‹ä¸­å“¥å¸ƒæ—ç‹åœ‹. ç‰ˆæ¬Šæ‰€æœ‰.
            </p>

            <!-- é€²å…¥å¾Œå°æŒ‰éˆ• -->
            <button id="enterAdminButton" class="mt-8 bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300 transform hover:scale-105">
                é€²å…¥å¾Œå°ç³»çµ±
            </button>
        </div>
    </div>

    <!-- å¾Œå°ç³»çµ±å€å¡Š (é è¨­éš±è—) -->
    <div id="adminPanel" class="hidden flex flex-col min-h-screen p-4 bg-slate-900 text-white">
        <div class="bg-gray-800 p-8 rounded-xl shadow-2xl max-w-4xl w-full text-center mx-auto mb-8">
            <h1 class="text-5xl font-extrabold text-blue-200 mb-6 leading-tight">
                å¾Œå°ç®¡ç†ç³»çµ±
            </h1>
            <p class="text-xl text-gray-300 mb-8">
                æ­¡è¿ä¾†åˆ°ç®¡ç†å“¡é é¢ã€‚é€™è£¡å°‡ç”¨æ–¼ç¶²ç«™çš„å…§éƒ¨ç®¡ç†å’Œè¨­å®šã€‚
            </p>

            <div class="mt-8 grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- å¾Œå°ç™»å…¥ç´€éŒ„ -->
                <div class="bg-slate-700 p-6 rounded-lg shadow-md">
                    <h3 class="text-2xl font-semibold text-blue-300 mb-4">å¾Œå°ç™»å…¥ç´€éŒ„</h3>
                    <div id="adminLoginRecords" class="text-left overflow-y-auto max-h-60">
                        <p class="text-gray-400 text-center">è¼‰å…¥ä¸­...</p>
                    </div>
                </div>

                <!-- ç¶²ç«™è¨ªå•ç´€éŒ„ -->
                <div class="bg-slate-700 p-6 rounded-lg shadow-md">
                    <h3 class="text-2xl font-semibold text-blue-300 mb-4">ç¶²ç«™è¨ªå•ç´€éŒ„</h3>
                    <div id="websiteAccessRecords" class="text-left overflow-y-auto max-h-60">
                        <p class="text-gray-400 text-center">è¼‰å…¥ä¸­...</p>
                    </div>
                </div>
            </div>

            <!-- è¿”å›é¦–é æŒ‰éˆ• -->
            <button id="returnHomeButton" class="mt-8 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-full shadow-lg transition duration-300 transform hover:scale-105">
                è¿”å›é¦–é 
            </button>
        </div>
    </div>

    <!-- å¾Œå°å¯†ç¢¼è¼¸å…¥æ¨¡æ…‹æ¡† (é è¨­éš±è—) -->
    <div id="passwordModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center hidden z-20">
        <div class="bg-gray-800 p-8 rounded-xl shadow-2xl max-w-sm w-full text-center">
            <h2 class="text-2xl font-bold text-white mb-4">è¼¸å…¥å¾Œå°å¯†ç¢¼</h2>
            <input type="password" id="adminPasswordInput" placeholder="è«‹è¼¸å…¥å¯†ç¢¼" class="w-full p-3 rounded-md border border-gray-600 bg-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-blue-400">
            <p id="passwordError" class="text-red-400 mt-2 hidden">å¯†ç¢¼éŒ¯èª¤ï¼Œè«‹å†è©¦ä¸€æ¬¡ã€‚</p>
            <button id="submitAdminPassword" class="mt-6 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full shadow-md transition duration-200">
                ç¢ºèª
            </button>
            <button id="cancelAdminPassword" class="mt-6 ml-4 bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-full shadow-md transition duration-200">
                å–æ¶ˆ
            </button>
        </div>
    </div>

    <div id="chatToggleButton" class="floating-chat-button">
        ğŸ’¬
    </div>

    <div id="chatWindow" class="chat-container hidden">
        <div class="chat-header bg-gray-800 text-white p-4 flex justify-between items-center rounded-t-xl">
            <h3 class="text-lg font-semibold">å‰å³°åœ‹ä¸­å“¥å¸ƒæ—ç‹åœ‹å®¢æœ</h3>
            <div>
                <button id="minimizeChat" class="text-gray-300 hover:text-white mr-2 text-2xl leading-none">&minus;</button>
                <button id="closeChat" class="text-gray-300 hover:text-white text-2xl leading-none">&times;</button>
            </div>
        </div>
        <div id="chatMessages" class="chat-messages flex-grow p-4 overflow-y-auto">
            <div class="message-bubble ai">æ‚¨å¥½ï¼æˆ‘æ˜¯å‰å³°åœ‹ä¸­å“¥å¸ƒæ—ç‹åœ‹çš„å®¢æœï¼Œæœ‰ä»€éº¼å¯ä»¥ç‚ºæ‚¨æœå‹™çš„å—ï¼Ÿ</div>
        </div>
        <div class="chat-input-area p-4 border-t border-gray-200 flex items-center">
            <input type="text" id="chatInput" placeholder="è¼¸å…¥æ‚¨çš„è¨Šæ¯..." class="flex-grow p-3 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400">
            <button id="sendMessage" class="ml-3 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full shadow-md transition duration-200">
                å‚³é€
            </button>
        </div>
        <div id="chatLoading" class="absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center hidden rounded-xl">
            <div class="text-gray-700 text-lg font-semibold">æ€è€ƒä¸­...</div>
        </div>
    </div>

    <script type="module">
        import { getFirestore, addDoc, collection, query, orderBy, onSnapshot, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        document.addEventListener('DOMContentLoaded', () => {
            const chatToggleButton = document.getElementById('chatToggleButton');
            const chatWindow = document.getElementById('chatWindow');
            const minimizeChatButton = document.getElementById('minimizeChat');
            const closeChatButton = document.getElementById('closeChat');
            const chatMessagesDiv = document.getElementById('chatMessages');
            const chatInput = document.getElementById('chatInput');
            const sendMessageButton = document.getElementById('sendMessage');
            const chatLoading = document.getElementById('chatLoading');

            const mainContentDiv = document.getElementById('mainContent');
            const adminPanelDiv = document.getElementById('adminPanel');
            const enterAdminButton = document.getElementById('enterAdminButton');
            const returnHomeButton = document.getElementById('returnHomeButton');

            const passwordModal = document.getElementById('passwordModal');
            const adminPasswordInput = document.getElementById('adminPasswordInput');
            const passwordError = document.getElementById('passwordError');
            const submitAdminPasswordButton = document.getElementById('submitAdminPassword');
            const cancelAdminPasswordButton = document.getElementById('cancelAdminPassword');

            const adminLoginRecordsDiv = document.getElementById('adminLoginRecords');
            const websiteAccessRecordsDiv = document.getElementById('websiteAccessRecords');

            const ADMIN_PASSWORD = '1313'; // å›ºå®šå¯†ç¢¼

            let chatHistory = [{
                role: "model",
                parts: [{ text: "æ‚¨å¥½ï¼æˆ‘æ˜¯å‰å³°åœ‹ä¸­å“¥å¸ƒæ—ç‹åœ‹çš„å®¢æœï¼Œæœ‰ä»€éº¼å¯ä»¥ç‚ºæ‚¨æœå‹™çš„å—ï¼Ÿ" }]
            }];

            let db, userId; // Firebase instances and user ID

            // Function to get user's public IP address
            async function getUserIP() {
                try {
                    const response = await fetch('https://api.ipify.org?format=json');
                    const data = await response.json();
                    return data.ip;
                } catch (error) {
                    console.error('Error fetching IP:', error);
                    return 'æœªçŸ¥ IP';
                }
            }

            // Function to log admin login to Firestore
            async function logAdminLogin() {
                if (!db || !userId) {
                    console.error("Firestore or User ID not initialized for logging.");
                    return;
                }
                const ip = await getUserIP();
                try {
                    const loginsColRef = collection(db, `artifacts/${window.fb.appId}/public/data/admin_logins`);
                    await addDoc(loginsColRef, {
                        ip: ip,
                        timestamp: serverTimestamp(),
                        userId: userId
                    });
                } catch (e) {
                    console.error("Error adding admin login document: ", e);
                }
            }

            // Function to log website access to Firestore
            async function logWebsiteAccess() {
                if (!db || !userId) {
                    console.error("Firestore or User ID not initialized for logging.");
                    return;
                }
                const ip = await getUserIP();
                try {
                    const accessColRef = collection(db, `artifacts/${window.fb.appId}/public/data/website_accesses`);
                    await addDoc(accessColRef, {
                        ip: ip,
                        timestamp: serverTimestamp(),
                        userId: userId
                    });
                } catch (e) {
                    console.error("Error adding website access document: ", e);
                }
            }

            // Fetch and display admin login records
            function fetchAdminLoginRecords() {
                if (!db) {
                    adminLoginRecordsDiv.innerHTML = '<p class="text-red-400 text-center">Firestore æœªåˆå§‹åŒ–ã€‚</p>';
                    return;
                }
                const q = query(collection(db, `artifacts/${window.fb.appId}/public/data/admin_logins`)); // Removed orderBy
                onSnapshot(q, (snapshot) => {
                    adminLoginRecordsDiv.innerHTML = '';
                    if (snapshot.empty) {
                        adminLoginRecordsDiv.innerHTML = '<p class="text-gray-400 text-center">æ²’æœ‰ç™»å…¥ç´€éŒ„ã€‚</p>';
                        return;
                    }
                    // Sort in memory by timestamp in descending order
                    const sortedDocs = snapshot.docs
                        .map(doc => ({ id: doc.id, ...doc.data() }))
                        .sort((a, b) => (b.timestamp?.toDate() || 0) - (a.timestamp?.toDate() || 0));

                    sortedDocs.forEach((doc) => {
                        const data = doc;
                        const time = data.timestamp ? new Date(data.timestamp.seconds * 1000).toLocaleString('zh-TW') : 'N/A';
                        const item = document.createElement('div');
                        item.classList.add('log-item');
                        item.innerHTML = `
                            <span class="log-ip">${data.ip}</span>
                            <span class="log-user">ç”¨æˆ¶ID: ${data.userId}</span>
                            <span class="log-time">${time}</span>
                        `;
                        adminLoginRecordsDiv.appendChild(item);
                    });
                }, (error) => {
                    console.error("Error fetching admin login records: ", error);
                    adminLoginRecordsDiv.innerHTML = `<p class="text-red-400 text-center">è¼‰å…¥ç´€éŒ„å¤±æ•—: ${error.message}</p>`;
                });
            }

            // Fetch and display website access records
            function fetchWebsiteAccessRecords() {
                if (!db) {
                    websiteAccessRecordsDiv.innerHTML = '<p class="text-red-400 text-center">Firestore æœªåˆå§‹åŒ–ã€‚</p>';
                    return;
                }
                const q = query(collection(db, `artifacts/${window.fb.appId}/public/data/website_accesses`)); // Removed orderBy
                onSnapshot(q, (snapshot) => {
                    websiteAccessRecordsDiv.innerHTML = '';
                    if (snapshot.empty) {
                        websiteAccessRecordsDiv.innerHTML = '<p class="text-gray-400 text-center">æ²’æœ‰ç¶²ç«™è¨ªå•ç´€éŒ„ã€‚</p>';
                        return;
                    }
                    // Sort in memory by timestamp in descending order
                    const sortedDocs = snapshot.docs
                        .map(doc => ({ id: doc.id, ...doc.data() }))
                        .sort((a, b) => (b.timestamp?.toDate() || 0) - (a.timestamp?.toDate() || 0));

                    sortedDocs.forEach((doc) => {
                        const data = doc;
                        const time = data.timestamp ? new Date(data.timestamp.seconds * 1000).toLocaleString('zh-TW') : 'N/A';
                        const item = document.createElement('div');
                        item.classList.add('log-item');
                        item.innerHTML = `
                            <span class="log-ip">${data.ip}</span>
                            <span class="log-user">ç”¨æˆ¶ID: ${data.userId}</span>
                            <span class="log-time">${time}</span>
                        `;
                        websiteAccessRecordsDiv.appendChild(item);
                    });
                }, (error) => {
                    console.error("Error fetching website access records: ", error);
                    websiteAccessRecordsDiv.innerHTML = `<p class="text-red-400 text-center">è¼‰å…¥ç´€éŒ„å¤±æ•—: ${error.message}</p>`;
                });
            }

            // Event listener for Firebase Auth Ready
            document.addEventListener('firebaseAuthReady', () => {
                db = window.fb.db;
                userId = window.fb.userId;
                console.log("Firebase initialized and user ID available:", userId);

                // Log website access only after Firebase is ready and user ID is established
                logWebsiteAccess();
            });

            // é¡¯ç¤º/éš±è—èŠå¤©è¦–çª—
            chatToggleButton.addEventListener('click', () => {
                chatWindow.classList.toggle('hidden');
                chatWindow.classList.remove('minimized');
                chatToggleButton.classList.add('hidden');
                scrollToBottom();
            });

            // æœ€å°åŒ–èŠå¤©è¦–çª—
            minimizeChatButton.addEventListener('click', () => {
                chatWindow.classList.add('minimized');
                chatToggleButton.classList.remove('hidden');
            });

            // é—œé–‰èŠå¤©è¦–çª—
            closeChatButton.addEventListener('click', () => {
                chatWindow.classList.add('hidden');
                chatWindow.classList.remove('minimized');
                chatToggleButton.classList.remove('hidden');
            });

            // é»æ“Šæœ€å°åŒ–å¾Œçš„åœ“å½¢æŒ‰éˆ•é‡æ–°æ‰“é–‹
            chatWindow.addEventListener('click', (event) => {
                if (chatWindow.classList.contains('minimized')) {
                    chatWindow.classList.remove('minimized');
                    chatWindow.classList.remove('hidden');
                    chatToggleButton.classList.add('hidden');
                    scrollToBottom();
                    event.stopPropagation();
                }
            });

            // æ»¾å‹•åˆ°èŠå¤©è¨Šæ¯åº•éƒ¨
            function scrollToBottom() {
                chatMessagesDiv.scrollTop = chatMessagesDiv.scrollHeight;
            }

            // é¡¯ç¤ºè¨Šæ¯åˆ°èŠå¤©è¦–çª—
            function displayMessage(message, sender) {
                const messageBubble = document.createElement('div');
                messageBubble.classList.add('message-bubble', sender);
                messageBubble.innerHTML = message;
                chatMessagesDiv.appendChild(messageBubble);
                scrollToBottom();
            }

            // é¡¯ç¤ºä¸»è¦å…§å®¹ä¸¦éš±è—å¾Œå°ç³»çµ±
            function showMainContent() {
                mainContentDiv.classList.remove('hidden');
                adminPanelDiv.classList.add('hidden');
                chatToggleButton.classList.remove('hidden');
                chatWindow.classList.add('hidden');
            }

            // é¡¯ç¤ºå¾Œå°ç³»çµ±ä¸¦éš±è—ä¸»è¦å…§å®¹
            function showAdminPanel() {
                mainContentDiv.classList.add('hidden');
                adminPanelDiv.classList.remove('hidden');
                chatToggleButton.classList.remove('hidden');
                chatWindow.classList.add('hidden');
                // Fetch and display logs when admin panel is shown
                fetchAdminLoginRecords();
                fetchWebsiteAccessRecords();
            }

            // å¾Œå°å¯†ç¢¼æ¨¡æ…‹æ¡†ç›¸é—œå‡½å¼
            function showPasswordModal() {
                passwordModal.classList.remove('hidden');
                adminPasswordInput.value = '';
                passwordError.classList.add('hidden');
                adminPasswordInput.focus();
            }

            function hidePasswordModal() {
                passwordModal.classList.add('hidden');
            }

            // ç¶å®šåˆ‡æ›æŒ‰éˆ•äº‹ä»¶
            enterAdminButton.addEventListener('click', showPasswordModal);
            returnHomeButton.addEventListener('click', showMainContent);

            // å¯†ç¢¼æ¨¡æ…‹æ¡†çš„ç¢ºèªæŒ‰éˆ•äº‹ä»¶
            submitAdminPasswordButton.addEventListener('click', async () => {
                const enteredPassword = adminPasswordInput.value.trim();
                if (enteredPassword === ADMIN_PASSWORD) {
                    hidePasswordModal();
                    await logAdminLogin(); // Log successful admin login
                    showAdminPanel();
                } else {
                    passwordError.textContent = 'å¯†ç¢¼éŒ¯èª¤ï¼Œè«‹å†è©¦ä¸€æ¬¡ã€‚';
                    passwordError.classList.remove('hidden');
                }
            });

            // å¯†ç¢¼è¼¸å…¥æ¡†æŒ‰ Enter éµè§¸ç™¼ç¢ºèª
            adminPasswordInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    submitAdminPasswordButton.click();
                }
            });

            // å¯†ç¢¼æ¨¡æ…‹æ¡†çš„å–æ¶ˆæŒ‰éˆ•äº‹ä»¶
            cancelAdminPasswordButton.addEventListener('click', hidePasswordModal);


            // å‚³é€è¨Šæ¯
            async function sendMessage() {
                const userMessage = chatInput.value.trim();
                if (userMessage === '') return;

                displayMessage(userMessage, 'user');
                chatInput.value = '';

                chatLoading.classList.remove('hidden');

                if (userMessage.includes('ç®¡ç†å“¡å¯†ç¢¼') || userMessage.includes('å¾Œå°å¯†ç¢¼') || userMessage.includes('admin password')) {
                    displayMessage(`ç›®å‰çš„å¾Œå°å¯†ç¢¼æ˜¯ï¼š<span class="font-bold text-green-600">${ADMIN_PASSWORD}</span>ã€‚`, 'ai');
                    chatLoading.classList.add('hidden');
                    return;
                }

                let promptTextForLLM = '';
                const websiteContent = `
                    ç¶²ç«™æ¨™é¡Œï¼šå‰å³°åœ‹ä¸­å“¥å¸ƒæ—ç‹åœ‹
                    ç¶²ç«™ç°¡ä»‹ï¼šå“¥å¸ƒæ—ç‹åœ‹,æˆç«‹æ–¼2025å¹´3æœˆ11æ—¥,æ˜¯ä¸€å€‹ç”±åœ‹ä¸­å–®èº«ç”·å¥³çµ„æˆçš„èŠå¤©èšè½ã€‚æˆ‘å€‘è‡ªç¨±ã€Œå“¥å¸ƒæ—ã€,ä¸ç‚ºåˆ¥çš„,åªå› å–®èº«ä½†ä¸å­¤å–®,æç¬‘åˆçœŸèª ,å˜´ç ²ä¸­å¸¶é»æº«æŸ”,æ—¥å¸¸ä¸­å……æ»¿ç«èŠ±ã€‚é€™è£¡æ²’æœ‰ç‹å­å…¬ä¸»,åªæœ‰ä¸€ç¾¤åœ¨è¨Šæ¯è£¡äº’ç›¸é¬§äº’ç›¸æŒºçš„å“¥å¸ƒæ—å¤¥ä¼´ã€‚
                    è²æ˜ï¼šè¿½è¹¤æˆ‘å€‘çš„å¸³è™Ÿï¼Œå°‡æœƒç„¡æ¢ä»¶æ‹‰æ‚¨é€²å…¥æˆ‘å€‘çš„å°ˆå±¬ç¤¾ç¾¤ç¾¤çµ„ï¼
                    å¹¹éƒ¨åˆ—è¡¨ï¼š
                    - ç¸½çµ±: @qwer789456321 (Instagram: https://www.instagram.com/qwer789456321/)
                    - å‰¯ç¸½çµ±: @e1310510 (Instagram: https://www.instagram.com/e1310510/)
                    - ç¸½éƒ¨ç¸½è£: @kerry_magic666 (Instagram: https://www.instagram.com/kerry_magic666/)
                    - å°æ··æ··: @89._.dry (Instagram: https://www.instagram.com/89._.dry/)
                    - å°ç·¨: @kerry_magic666 (Instagram: https://www.instagram.com/kerry_magic666/)
                    - ç¶²ç«™è¨­è¨ˆå¸«: @sufu5403 (Instagram: https://www.instagram.com/sufu5403/)
                    å¾Œå°ç³»çµ±ï¼šæœ¬ç¶²ç«™åŒ…å«ä¸€å€‹ç®¡ç†å“¡å¾Œå°ç³»çµ±ï¼Œæ¡ç”¨æ·±è—é»‘è‰²ç³»è¨­è¨ˆï¼Œä¾›å…§éƒ¨ç®¡ç†ä½¿ç”¨ã€‚æ‚¨å¯ä»¥é€šéé¦–é ä¸Šçš„ã€Œé€²å…¥å¾Œå°ç³»çµ±ã€æŒ‰éˆ•é€²å…¥æ­¤é é¢ã€‚é€²å…¥å¾Œå°ç³»çµ±éœ€è¦ä¸€å€‹å›ºå®šå¯†ç¢¼ï¼š1313ã€‚æ‚¨å¯ä»¥å‘å®¢æœï¼ˆæˆ‘ï¼‰è©¢å•ç•¶å‰å¯†ç¢¼ã€‚å¾Œå°ç³»çµ±åªé¡¯ç¤ºå¾Œå°ç™»å…¥çš„ IP å’Œç¶²ç«™è¨ªå•çš„ IP ç´€éŒ„ã€‚
                `;

                promptTextForLLM = `ä½ æ˜¯ä¸€å€‹å‰å³°åœ‹ä¸­å“¥å¸ƒæ—ç‹åœ‹çš„å®¢æœäººå“¡ã€‚ä½ çš„è·è²¬æ˜¯æ ¹æ“šä»¥ä¸‹æä¾›çš„ç¶²ç«™å…§å®¹ä¾†å›ç­”å•é¡Œã€‚å¦‚æœå•é¡Œèˆ‡ç¶²ç«™å…§å®¹ç„¡é—œï¼Œè«‹ç¦®è²Œåœ°å›ç­”ï¼š'æŠ±æ­‰ï¼Œæˆ‘åªèƒ½å›ç­”èˆ‡å‰å³°åœ‹ä¸­å“¥å¸ƒæ—ç‹åœ‹ç¶²ç«™ç›¸é—œçš„å•é¡Œã€‚'

                ç•¶æåˆ°æˆå“¡çš„ Instagram å¸³è™Ÿæ™‚ï¼Œè«‹å°‡å…¶æ ¼å¼åŒ–ç‚º HTML é€£çµã€‚ä¾‹å¦‚ï¼š<a href="[IGç¶²å€]" target="_blank" rel="noopener noreferrer" class="font-semibold text-blue-600 hover:underline">@ä½¿ç”¨è€…åç¨±</a>ã€‚

                ä»¥ä¸‹æ˜¯ç¶²ç«™å…§å®¹ï¼š
                ${websiteContent}

                ä½¿ç”¨è€…å•é¡Œï¼š${userMessage}
                `;

                try {
                    let chatHistoryForLLM = [];
                    chatHistoryForLLM.push({ role: "user", parts: [{ text: promptTextForLLM }] });

                    const payload = { contents: chatHistoryForLLM };
                    const apiKey = "YOUR_GEMINI_API_KEY"; // Replace with your actual Gemini API key if needed
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const aiResponse = result.candidates[0].content.parts[0].text;
                        displayMessage(aiResponse, 'ai');
                        chatHistory.push({ role: "user", parts: [{ text: userMessage }] });
                        chatHistory.push({ role: "model", parts: [{ text: aiResponse }] });
                    } else {
                        displayMessage('æŠ±æ­‰ï¼Œæˆ‘ç„¡æ³•ç†è§£æ‚¨çš„æ„æ€ï¼Œè«‹å†è©¦ä¸€æ¬¡ã€‚', 'ai');
                        console.error('Gemini API response structure unexpected:', result);
                    }
                } catch (error) {
                    displayMessage('èˆ‡å®¢æœé€£ç·šæ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚', 'ai');
                    console.error('Error calling Gemini API:', error);
                } finally {
                    chatLoading.classList.add('hidden');
                }
            }

            sendMessageButton.addEventListener('click', sendMessage);
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
        });
    </script>
    <script type="text/plain">
        <!-- Firestore Security Rules (IMPORTANT) -->
        <!-- These rules must be set in your Firebase project's Firestore console -->
        <!-- Go to Firebase Console -> Firestore Database -> Rules Tab -->
        <!-- Replace YOUR_APP_ID with your actual app ID from the Canvas environment -->
        <!-- Ensure you publish these rules after making changes -->
        rules_version = '2';
        service cloud.firestore {
          match /databases/{database}/documents {
            match /artifacts/{appId} {
              // Public data for admin logins
              match /public/data/admin_logins/{document=**} {
                allow read, create: if request.auth != null;
                allow write: if false; // Only allow creation, no direct updates or deletes via client
              }
              // Public data for website accesses
              match /public/data/website_accesses/{document=**} {
                allow read, create: if request.auth != null;
                allow write: if false; // Only allow creation, no direct updates or deletes via client
              }

              // Private user data (if any, current app doesn't use it)
              match /users/{userId}/{document=**} {
                allow read, write: if request.auth != null && request.auth.uid == userId;
              }
            }
          }
        }
    </script>
</body>
</html>
