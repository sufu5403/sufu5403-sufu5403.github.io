<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‰å³°åœ‹ä¸­å“¥å¸ƒæ—ç‹åœ‹</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* å®¢æœèŠå¤©è¦–çª—çš„å›ºå®šå®šä½å’ŒåŸºæœ¬æ¨£å¼ */
        .chat-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px; /* èŠå¤©è¦–çª—å¯¬åº¦ */
            height: 450px; /* èŠå¤©è¦–çª—é«˜åº¦ */
            background-color: #fff;
            border-radius: 1rem; /* åœ“è§’ */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2); /* é™°å½± */
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: all 0.3s ease-in-out; /* å¹³æ»‘éæ¸¡æ•ˆæœ */
            z-index: 1000; /* ç¢ºä¿åœ¨æœ€ä¸Šå±¤ */
        }

        /* æœ€å°åŒ–ç‹€æ…‹ */
        .chat-container.minimized {
            width: 60px;
            height: 60px;
            bottom: 20px;
            right: 20px;
            border-radius: 50%; /* è®Šæˆåœ“å½¢ */
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            cursor: pointer;
        }

        /* èŠå¤©è¨Šæ¯å€å¡Šæ¨£å¼ */
        .chat-messages {
            flex-grow: 1;
            overflow-y: auto;
            padding: 1rem;
            background-color: #f9fafb; /* æ·ºç°è‰²èƒŒæ™¯ */
            border-top-left-radius: 0.5rem;
            border-top-right-radius: 0.5rem;
        }

        /* èŠå¤©è¨Šæ¯æ³¡æ³¡æ¨£å¼ */
        .message-bubble {
            max-width: 80%;
            padding: 0.6rem 1rem;
            border-radius: 1rem;
            margin-bottom: 0.75rem;
            word-wrap: break-word;
        }

        .message-bubble.user {
            background-color: #3B82F6; /* è—è‰² */
            color: white;
            margin-left: auto; /* é å³å°é½Š */
            border-bottom-right-radius: 0.2rem;
        }

        .message-bubble.ai {
            background-color: #E5E7EB; /* æ·ºç° */
            color: #1F2937;
            margin-right: auto; /* é å·¦å°é½Š */
            border-bottom-left-radius: 0.2rem;
        }

        /* éš±è—èŠå¤©è¦–çª—å…§å®¹ï¼ˆæœ€å°åŒ–æ™‚ï¼‰ */
        .chat-container.minimized .chat-header,
        .chat-container.minimized .chat-messages,
        .chat-container.minimized .chat-input-area {
            display: none;
        }

        /* æœ€å°åŒ–æŒ‰éˆ•çš„åœ–ç¤º */
        .chat-container.minimized .chat-toggle-button {
            display: block; /* æœ€å°åŒ–æ™‚é¡¯ç¤ºæŒ‰éˆ• */
            font-size: 2rem;
            color: #4B5563;
        }

        /* æµ®å‹•æŒ‰éˆ•çš„æ¨£å¼ */
        .floating-chat-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background-color: #10B981; /* ç¶ è‰² */
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease-in-out;
            z-index: 1001; /* ç¢ºä¿åœ¨èŠå¤©è¦–çª—ä¹‹ä¸Š */
        }

        .floating-chat-button:hover {
            transform: scale(1.1);
            background-color: #059669;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-green-400 to-blue-500 min-h-screen flex items-center justify-center p-4">
    <div class="bg-white p-8 rounded-xl shadow-2xl max-w-4xl w-full text-center transform transition-all duration-300 hover:scale-105">
        <h1 class="text-5xl font-extrabold text-gray-900 mb-6 leading-tight">
            å‰å³°åœ‹ä¸­å“¥å¸ƒæ—ç‹åœ‹
        </h1>

        <p class="text-xl text-gray-700 mb-8">
            å“¥å¸ƒæ—ç‹åœ‹,æˆç«‹æ–¼2025å¹´3æœˆ11æ—¥,æ˜¯ä¸€å€‹ç”±åœ‹ä¸­å–®èº«ç”·å¥³çµ„æˆçš„èŠå¤©èšè½ã€‚
            æˆ‘å€‘è‡ªç¨±ã€Œå“¥å¸ƒæ—ã€,ä¸ç‚ºåˆ¥çš„,åªå› å–®èº«ä½†ä¸å­¤å–®,æç¬‘åˆçœŸèª ,å˜´ç ²ä¸­å¸¶é»æº«æŸ”,æ—¥å¸¸ä¸­å……æ»¿ç«èŠ±ã€‚
            é€™è£¡æ²’æœ‰ç‹å­å…¬ä¸»,åªæœ‰ä¸€ç¾¤åœ¨è¨Šæ¯è£¡äº’ç›¸é¬§äº’ç›¸æŒºçš„å“¥å¸ƒæ—å¤¥ä¼´ã€‚
        </p>

        <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 p-6 rounded-lg mb-8 shadow-md">
            <h2 class="text-2xl font-bold mb-3 flex items-center justify-center">
                <svg class="w-7 h-7 mr-3 text-yellow-600" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.542 2.705-1.542 3.47 0l5.58 11.23c.75 1.51.148 3.3-1.565 3.3H4.242c-1.713 0-2.315-1.79-.164-3.3l5.58-11.23zM11 15a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V7a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>
                è²æ˜ï¼
            </h2>
            <p class="text-lg">
                è¿½è¹¤æˆ‘å€‘çš„å¸³è™Ÿï¼Œå°‡æœƒç„¡æ¢ä»¶æ‹‰æ‚¨é€²å…¥æˆ‘å€‘çš„å°ˆå±¬ç¤¾ç¾¤ç¾¤çµ„ï¼
            </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
            <div class="bg-blue-50 p-6 rounded-lg shadow-md border border-blue-200 flex flex-col items-center">
                <h3 class="text-xl font-semibold text-blue-800 mb-2">ç¸½çµ±</h3>
                <a href="https://www.instagram.com/qwer789456321/" target="_blank" rel="noopener noreferrer" class="text-gray-700 text-lg flex items-center hover:text-blue-600 transition-colors duration-200">
                    @qwer789456321
                    <svg class="w-5 h-5 ml-2 text-pink-600" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.217 2.428.465.66.254 1.216.598 1.772 1.154.556.556.909 1.112 1.154 1.772.248.637.416 1.364.465 2.428.047 1.024.06 1.379.06 3.808v.63a4.5 4.5 0 01-.07 1.006c-.035.52-.103 1.06-.271 1.59-.147.45-.33.86-.53 1.22-.205.36-.461.66-.776.975-.315.315-.615.571-.975.776-.36.2-.77.383-1.22.53-.53.168-1.07.236-1.59.271a4.5 4.5 0 01-1.006.07h-.63c-2.43 0-2.784-.013-3.808-.06-1.064-.049-1.791-.217-2.428-.465-.66-.254-1.216-.598-1.772-1.154-.556-.556-.909-1.112-1.154-1.772-.248-.637-.416-1.364-.465-2.428C2.013 14.784 2 14.43 2 12v-.63c0-2.43.013-2.784.06-3.808.049-1.064.217-1.791.465-2.428.254-.66.598-1.216 1.154-1.772.556-.556 1.112-.909 1.772-1.154.637-.248 1.364-.416 2.428-.465C9.216 2.013 9.57 2 12 2zm0 2.16a7.84 7.84 0 100 15.68 7.84 7.84 0 000-15.68zm0 3.87a5.81 5.81 0 110 11.62 5.81 5.81 0 010-11.62zm0 2.16a3.65 3.65 0 100 7.3 3.65 3.65 0 000-7.3zM16.5 7.17a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clip-rule="evenodd" />
                    </svg>
                </a>
            </div>
            <div class="bg-blue-50 p-6 rounded-lg shadow-md border border-blue-200 flex flex-col items-center">
                <h3 class="text-xl font-semibold text-blue-800 mb-2">å‰¯ç¸½çµ±</h3>
                <a href="https://www.instagram.com/e1310510/" target="_blank" rel="noopener noreferrer" class="text-gray-700 text-lg flex items-center hover:text-blue-600 transition-colors duration-200">
                    @e1310510
                    <svg class="w-5 h-5 ml-2 text-pink-600" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.217 2.428.465.66.254 1.216.598 1.772 1.154.556.556.909 1.112 1.154 1.772.248.637.416 1.364.465 2.428.047 1.024.06 1.379.06 3.808v.63a4.5 4.5 0 01-.07 1.006c-.035.52-.103 1.06-.271 1.59-.147.45-.33.86-.53 1.22-.205.36-.461.66-.776.975-.315.315-.615.571-.975.776-.36.2-.77.383-1.22.53-.53.168-1.07.236-1.59.271a4.5 4.5 0 01-1.006.07h-.63c-2.43 0-2.784-.013-3.808-.06-1.064-.049-1.791-.217-2.428-.465-.66-.254-1.216-.598-1.772-1.154-.556-.556-.909-1.112-1.154-1.772-.248-.637-.416-1.364-.465-2.428C2.013 14.784 2 14.43 2 12v-.63c0-2.43.013-2.784.06-3.808.049-1.064.217-1.791.465-2.428.254-.66.598-1.216 1.154-1.772.556-.556 1.112-.909 1.772-1.154.637-.248 1.364-.416 2.428-.465C9.216 2.013 9.57 2 12 2zm0 2.16a7.84 7.84 0 100 15.68 7.84 7.84 0 000-15.68zm0 3.87a5.81 5.81 0 110 11.62 5.81 5.81 0 010-11.62zm0 2.16a3.65 3.65 0 100 7.3 3.65 3.65 0 000-7.3zM16.5 7.17a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clip-rule="evenodd" />
                    </svg>
                </a>
            </div>
            <div class="bg-blue-50 p-6 rounded-lg shadow-md border border-blue-200 flex flex-col items-center">
                <h3 class="text-xl font-semibold text-blue-800 mb-2">ç¸½éƒ¨ç¸½è£</h3>
                <a href="https://www.instagram.com/kerry_magic666/" target="_blank" rel="noopener noreferrer" class="text-gray-700 text-lg flex items-center hover:text-blue-600 transition-colors duration-200">
                    @kerry_magic666
                    <svg class="w-5 h-5 ml-2 text-pink-600" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.217 2.428.465.66.254 1.216.598 1.772 1.154.556.556.909 1.112 1.154 1.772.248.637.416 1.364.465 2.428.047 1.024.06 1.379.06 3.808v.63a4.5 4.5 0 01-.07 1.006c-.035.52-.103 1.06-.271 1.59-.147.45-.33.86-.53 1.22-.205.36-.461.66-.776.975-.315.315-.615.571-.975.776-.36.2-.77.383-1.22.53-.53.168-1.07.236-1.59.271a4.5 4.5 0 01-1.006.07h-.63c-2.43 0-2.784-.013-3.808-.06-1.064-.049-1.791-.217-2.428-.465-.66-.254-1.216-.598-1.772-1.154-.556-.556-.909-1.112-1.154-1.772-.248-.637-.416-1.364-.465-2.428C2.013 14.784 2 14.43 2 12v-.63c0-2.43.013-2.784.06-3.808.049-1.064.217-1.791.465-2.428.254-.66.598-1.216 1.154-1.772.556-.556 1.112-.909 1.772-1.154.637-.248 1.364-.416 2.428-.465C9.216 2.013 9.57 2 12 2zm0 2.16a7.84 7.84 0 100 15.68 7.84 7.84 0 000-15.68zm0 3.87a5.81 5.81 0 110 11.62 5.81 5.81 0 010-11.62zm0 2.16a3.65 3.65 0 100 7.3 3.65 3.65 0 000-7.3zM16.5 7.17a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clip-rule="evenodd" />
                    </svg>
                </a>
            </div>
            <div class="bg-blue-50 p-6 rounded-lg shadow-md border border-blue-200 flex flex-col items-center">
                <h3 class="text-xl font-semibold text-blue-800 mb-2">å°æ··æ··</h3>
                <a href="https://www.instagram.com/89._.dry/" target="_blank" rel="noopener noreferrer" class="text-gray-700 text-lg flex items-center hover:text-blue-600 transition-colors duration-200">
                    @89._.dry
                    <svg class="w-5 h-5 ml-2 text-pink-600" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.217 2.428.465.66.254 1.216.598 1.772 1.154.556.556.909 1.112 1.154 1.772.248.637.416 1.364.465 2.428.047 1.024.06 1.379.06 3.808v.63a4.5 4.5 0 01-.07 1.006c-.035.52-.103 1.06-.271 1.59-.147.45-.33.86-.53 1.22-.205.36-.461.66-.776.975-.315.315-.615.571-.975.776-.36.2-.77.383-1.22.53-.53.168-1.07.236-1.59.271a4.5 4.5 0 01-1.006.07h-.63c-2.43 0-2.784-.013-3.808-.06-1.064-.049-1.791-.217-2.428-.465-.66-.254-1.216-.598-1.772-1.154-.556-.556-.909-1.112-1.154-1.772-.248-.637-.416-1.364-.465-2.428C2.013 14.784 2 14.43 2 12v-.63c0-2.43.013-2.784.06-3.808.049-1.064.217-1.791.465-2.428.254-.66.598-1.216 1.154-1.772.556-.556 1.112-.909 1.772-1.154.637-.248 1.364-.416 2.428-.465C9.216 2.013 9.57 2 12 2zm0 2.16a7.84 7.84 0 100 15.68 7.84 7.84 0 000-15.68zm0 3.87a5.81 5.81 0 110 11.62 5.81 5.81 0 010-11.62zm0 2.16a3.65 3.65 0 100 7.3 3.65 3.65 0 000-7.3zM16.5 7.17a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clip-rule="evenodd" />
                    </svg>
                </a>
            </div>
            <div class="bg-blue-50 p-6 rounded-lg shadow-md border border-blue-200 flex flex-col items-center">
                <h3 class="text-xl font-semibold text-blue-800 mb-2">å°ç·¨</h3>
                <a href="https://www.instagram.com/kerry_magic666/" target="_blank" rel="noopener noreferrer" class="text-gray-700 text-lg flex items-center hover:text-blue-600 transition-colors duration-200">
                    @kerry_magic666
                    <svg class="w-5 h-5 ml-2 text-pink-600" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.217 2.428.465.66.254 1.216.598 1.772 1.154.556.556.909 1.112 1.154 1.772.248.637.416 1.364.465 2.428.047 1.024.06 1.379.06 3.808v.63a4.5 4.5 0 01-.07 1.006c-.035.52-.103 1.06-.271 1.59-.147.45-.33.86-.53 1.22-.205.36-.461.66-.776.975-.315.315-.615.571-.975.776-.36.2-.77.383-1.22.53-.53.168-1.07.236-1.59.271a4.5 4.5 0 01-1.006.07h-.63c-2.43 0-2.784-.013-3.808-.06-1.064-.049-1.791-.217-2.428-.465-.66-.254-1.216-.598-1.772-1.154-.556-.556-.909-1.112-1.154-1.772-.248-.637-.416-1.364-.465-2.428C2.013 14.784 2 14.43 2 12v-.63c0-2.43.013-2.784.06-3.808.049-1.064.217-1.791.465-2.428.254-.66.598-1.216 1.154-1.772.556-.556 1.112-.909 1.772-1.154.637-.248 1.364-.416 2.428-.465C9.216 2.013 9.57 2 12 2zm0 2.16a7.84 7.84 0 100 15.68 7.84 7.84 0 000-15.68zm0 3.87a5.81 5.81 0 110 11.62 5.81 5.81 0 010-11.62zm0 2.16a3.65 3.65 0 100 7.3 3.65 3.65 0 000-7.3zM16.5 7.17a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clip-rule="evenodd" />
                    </svg>
                </a>
            </div>
            <div class="bg-blue-50 p-6 rounded-lg shadow-md border border-blue-200 flex flex-col items-center">
                <h3 class="text-xl font-semibold text-blue-800 mb-2">ç¶²ç«™è¨­è¨ˆå¸«</h3>
                <a href="https://www.instagram.com/sufu5403/" target="_blank" rel="noopener noreferrer" class="text-gray-700 text-lg flex items-center hover:text-blue-600 transition-colors duration-200">
                    @sufu5403
                    <svg class="w-5 h-5 ml-2 text-pink-600" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.217 2.428.465.66.254 1.216.598 1.772 1.154.556.556.909 1.112 1.154 1.772.248.637.416 1.364.465 2.428.047 1.024.06 1.379.06 3.808v.63a4.5 4.5 0 01-.07 1.006c-.035.52-.103 1.06-.271 1.59-.147.45-.33.86-.53 1.22-.205.36-.461.66-.776.975-.315.315-.615.571-.975.776-.36.2-.77.383-1.22.53-.53.168-1.07.236-1.59.271a4.5 4.5 0 01-1.006.07h-.63c-2.43 0-2.784-.013-3.808-.06-1.064-.049-1.791-.217-2.428-.465-.66-.254-1.216-.598-1.772-1.154-.556-.556-.909-1.112-1.154-1.772-.248-.637-.416-1.364-.465-2.428C2.013 14.784 2 14.43 2 12v-.63c0-2.43.013-2.784.06-3.808.049-1.064.217-1.791.465-2.428.254-.66.598-1.216 1.154-1.772.556-.556 1.112-.909 1.772-1.154.637-.248 1.364-.416 2.428-.465C9.216 2.013 9.57 2 12 2zm0 2.16a7.84 7.84 0 100 15.68 7.84 7.84 0 000-15.68zm0 3.87a5.81 5.81 0 110 11.62 5.81 5.81 0 010-11.62zm0 2.16a3.65 3.65 0 100 7.3 3.65 3.65 0 000-7.3zM16.5 7.17a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clip-rule="evenodd" />
                    </svg>
                </a>
            </div>
        </div>

        <p class="text-gray-500 text-sm mt-8">
            Â© 2025 å‰å³°åœ‹ä¸­å“¥å¸ƒæ—ç‹åœ‹. ç‰ˆæ¬Šæ‰€æœ‰.
        </p>
    </div>

    <div id="chatToggleButton" class="floating-chat-button">
        ğŸ’¬
    </div>

    <div id="chatWindow" class="chat-container hidden">
        <div class="chat-header bg-gray-800 text-white p-4 flex justify-between items-center rounded-t-xl">
            <h3 class="text-lg font-semibold">å‰å³°åœ‹ä¸­å“¥å¸ƒæ—ç‹åœ‹å®¢æœ</h3>
            <div>
                <button id="minimizeChat" class="text-gray-300 hover:text-white mr-2 text-2xl leading-none">&minus;</button>
                <button id="closeChat" class="text-gray-300 hover:text-white text-2xl leading-none">&times;</button>
            </div>
        </div>
        <div id="chatMessages" class="chat-messages flex-grow p-4 overflow-y-auto">
            <div class="message-bubble ai">æ‚¨å¥½ï¼æˆ‘æ˜¯å‰å³°åœ‹ä¸­å“¥å¸ƒæ—ç‹åœ‹çš„å®¢æœï¼Œæœ‰ä»€éº¼å¯ä»¥ç‚ºæ‚¨æœå‹™çš„å—ï¼Ÿ</div>
        </div>
        <div class="chat-input-area p-4 border-t border-gray-200 flex items-center">
            <input type="text" id="chatInput" placeholder="è¼¸å…¥æ‚¨çš„è¨Šæ¯..." class="flex-grow p-3 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400">
            <button id="sendMessage" class="ml-3 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full shadow-md transition duration-200">
                å‚³é€
            </button>
        </div>
        <div id="chatLoading" class="absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center hidden rounded-xl">
            <div class="text-gray-700 text-lg font-semibold">æ€è€ƒä¸­...</div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const chatToggleButton = document.getElementById('chatToggleButton');
            const chatWindow = document.getElementById('chatWindow');
            const minimizeChatButton = document.getElementById('minimizeChat');
            const closeChatButton = document.getElementById('closeChat');
            const chatMessagesDiv = document.getElementById('chatMessages');
            const chatInput = document.getElementById('chatInput');
            const sendMessageButton = document.getElementById('sendMessage');
            const chatLoading = document.getElementById('chatLoading');

            let chatHistory = [{
                role: "model",
                parts: [{ text: "æ‚¨å¥½ï¼æˆ‘æ˜¯å‰å³°åœ‹ä¸­å“¥å¸ƒæ—ç‹åœ‹çš„å®¢æœï¼Œæœ‰ä»€éº¼å¯ä»¥ç‚ºæ‚¨æœå‹™çš„å—ï¼Ÿ" }]
            }]; // åˆå§‹å°è©±ç´€éŒ„

            // é¡¯ç¤º/éš±è—èŠå¤©è¦–çª—
            chatToggleButton.addEventListener('click', () => {
                chatWindow.classList.toggle('hidden');
                chatWindow.classList.remove('minimized'); // ç¢ºä¿æ‰“é–‹æ™‚ä¸æ˜¯æœ€å°åŒ–ç‹€æ…‹
                chatToggleButton.classList.add('hidden'); // éš±è—æµ®å‹•æŒ‰éˆ•
                scrollToBottom();
            });

            // æœ€å°åŒ–èŠå¤©è¦–çª—
            minimizeChatButton.addEventListener('click', () => {
                chatWindow.classList.add('minimized');
                chatToggleButton.classList.remove('hidden'); // é¡¯ç¤ºæµ®å‹•æŒ‰éˆ•
            });

            // é—œé–‰èŠå¤©è¦–çª—
            closeChatButton.addEventListener('click', () => {
                chatWindow.classList.add('hidden');
                chatWindow.classList.remove('minimized');
                chatToggleButton.classList.remove('hidden'); // é¡¯ç¤ºæµ®å‹•æŒ‰éˆ•
            });

            // é»æ“Šæœ€å°åŒ–å¾Œçš„åœ“å½¢æŒ‰éˆ•é‡æ–°æ‰“é–‹
            chatWindow.addEventListener('click', (event) => {
                if (chatWindow.classList.contains('minimized')) {
                    chatWindow.classList.remove('minimized');
                    chatWindow.classList.remove('hidden');
                    chatToggleButton.classList.add('hidden');
                    scrollToBottom();
                    event.stopPropagation(); // é˜²æ­¢äº‹ä»¶å†’æ³¡åˆ° body
                }
            });

            // æ»¾å‹•åˆ°èŠå¤©è¨Šæ¯åº•éƒ¨
            function scrollToBottom() {
                chatMessagesDiv.scrollTop = chatMessagesDiv.scrollHeight;
            }

            // é¡¯ç¤ºè¨Šæ¯åˆ°èŠå¤©è¦–çª—
            function displayMessage(message, sender) {
                const messageBubble = document.createElement('div');
                messageBubble.classList.add('message-bubble', sender);
                messageBubble.textContent = message;
                chatMessagesDiv.appendChild(messageBubble);
                scrollToBottom();
            }

            // å‚³é€è¨Šæ¯
            async function sendMessage() {
                const userMessage = chatInput.value.trim();
                if (userMessage === '') return;

                displayMessage(userMessage, 'user');
                chatInput.value = ''; // æ¸…ç©ºè¼¸å…¥æ¡†

                chatLoading.classList.remove('hidden'); // é¡¯ç¤ºè¼‰å…¥æŒ‡ç¤ºå™¨

                try {
                    // é€™è£¡æ§‹å»ºçµ¦ Gemini API çš„æç¤ºï¼Œæ˜ç¢ºæŒ‡ç¤ºå›ç­”ç¯„åœ
                    const systemInstruction = `ä½ æ˜¯ä¸€å€‹å‰å³°åœ‹ä¸­å“¥å¸ƒæ—ç‹åœ‹çš„å®¢æœäººå“¡ã€‚ä½ çš„è·è²¬æ˜¯å›ç­”èˆ‡æœ¬ç¶²ç«™å…§å®¹ç›¸é—œçš„å•é¡Œï¼Œä¾‹å¦‚ç¶²ç«™ç°¡ä»‹ã€è²æ˜ã€å¹¹éƒ¨åˆ—è¡¨ä»¥åŠå…¶ä»–ç›´æ¥èˆ‡ã€å‰å³°åœ‹ä¸­å“¥å¸ƒæ—ç‹åœ‹ã€ç¶²ç«™ç›¸é—œçš„è³‡è¨Šã€‚å¦‚æœå•é¡Œèˆ‡ç¶²ç«™å…§å®¹ç„¡é—œï¼Œè«‹ç¦®è²Œåœ°å›ç­”ï¼š'æŠ±æ­‰ï¼Œæˆ‘åªèƒ½å›ç­”èˆ‡å‰å³°åœ‹ä¸­å“¥å¸ƒæ—ç‹åœ‹ç¶²ç«™ç›¸é—œçš„å•é¡Œã€‚'`;

                    // å°‡ä½¿ç”¨è€…è¨Šæ¯åŠ å…¥åˆ°æ–°çš„ chatHistoryï¼Œä¸¦åœ¨å‰é¢åŠ ä¸Šç³»çµ±æŒ‡ä»¤
                    let currentChatHistory = [...chatHistory]; // è¤‡è£½ä¸€ä»½ï¼Œé¿å…ä¿®æ”¹åŸå§‹çš„ chatHistory
                    currentChatHistory.push({ role: "user", parts: [{ text: systemInstruction + "\n\nä½¿ç”¨è€…å•é¡Œï¼š" + userMessage }] });

                    const payload = { contents: currentChatHistory };
                    const apiKey = "AIzaSyB3qlfXKCS4nizaaHozIn1-Cuwn5J6OpwE"; // Canvas will automatically provide the API key
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const aiResponse = result.candidates[0].content.parts[0].text;
                        displayMessage(aiResponse, 'ai');
                        chatHistory.push({ role: "user", parts: [{ text: userMessage }] }); // åªæœ‰ç•¶AIæˆåŠŸå›æ‡‰æ™‚æ‰å°‡ç”¨æˆ¶è¨Šæ¯åŠ å…¥åˆ°é•·æœŸæ­·å²
                        chatHistory.push({ role: "model", parts: [{ text: aiResponse }] });
                    } else {
                        displayMessage('æŠ±æ­‰ï¼Œæˆ‘ç„¡æ³•ç†è§£æ‚¨çš„æ„æ€ï¼Œè«‹å†è©¦ä¸€æ¬¡ã€‚', 'ai');
                        console.error('Gemini API response structure unexpected:', result);
                    }
                } catch (error) {
                    displayMessage('èˆ‡å®¢æœé€£ç·šæ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚', 'ai');
                    console.error('Error calling Gemini API:', error);
                } finally {
                    chatLoading.classList.add('hidden'); // éš±è—è¼‰å…¥æŒ‡ç¤ºå™¨
                }
            }

            // ç¶å®šå‚³é€æŒ‰éˆ•å’Œ Enter éµ
            sendMessageButton.addEventListener('click', sendMessage);
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
        });
    </script>
</body>
</html>
